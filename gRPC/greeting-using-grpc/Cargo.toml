[workspace]
  members = [
    "crates/proto",
    "crates/common",
    "crates/server",
    "crates/client",
  ]
  resolver = "2"

  [workspace.package]
    authors = ["Mingyu Choo <mingyuchoo@gmail.com>"]
    edition = "2024"
    version = "0.1.0"

  [workspace.dependencies]
    # Proto dependencies
    prost             = "0.14.1"
    prost-types       = "0.14.1"
    tonic             = "0.14.2"
    tonic-build       = "0.14.2"
    tonic-prost       = "0.14.2"
    tonic-prost-build = "0.14.2"

    # Common dependencies
    thiserror = "2.0.17"
    tokio     = {features = ["macros", "rt-multi-thread"], version = "1.48.0"}

    # Dev dependencies
    criterion = {features = ["html_reports"], version = "0.7.0"}

[profile.dev]
  codegen-units = 256
  debug         = true
  incremental   = true
  opt-level     = 1

[profile.release]
  codegen-units = 1
  debug         = false
  lto           = "thin"
  opt-level     = 3
